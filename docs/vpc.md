# VPC作成

Amazon Virtual Private Cloud（以下、VPC）はAWS内に仮想ネットワークを作成するサービスです。基本的に一部のサービスを除いてはAWSのサービスはVPCのネットワーク内に展開されます。AWSアカウントを作成時にデフォルトVPCというものが作成されていますが、本番サービスを運用する場合は新しくVPCを作成することをおすすめします。

今回はパブリックネットワークを作成します。

---

![/images/vpc/vpc.jpg](/images/vpc/vpc.jpg)

コンソール画面を表示します。

1. ① のリージョンを「東京」に変更
2. ② に「vpc」を入力後、セレクトボックスをクリックして移動

---

![/images/vpc/vpc2.jpg](/images/vpc/vpc2.jpg)

「VPCの作成」をクリックします。

---

![/images/vpc/vpc3.jpg](/images/vpc/vpc3.jpg)

1. 「1 個のパブリックサブネットを持つ VPC」を選択
2. 「選択」ボタンをクリック

---

![/images/vpc/vpc4.jpg](/images/vpc/vpc4.jpg)

VPCでネットワークを作成します。
CIDRは後で変更できないのため、外部ネットワークを接続する場合は値を検討する必要があります。

今回はVPCで作成できる最大のネットワーク数を確保するためネットワークアドレス16を指定しています。

1. ① 「10.0.0.0/16」になっているか確認
2. ② VPCの名前として「iot」を入力
3. ③ 各入力値を確認
4. 「VPCの作成」ボタンをクリック

---

以上で、VPCを使用して新しいネットワークを作成することができました。

今回ウィザードを使ってネットワークを作成したため補足をします。

ウィザードによって以下のリソースが作成されました。

- VPC(CIRD 10.0.0.0/16)
- サブネット(10.0.0.0/24)
- ルートテーブル2つ
- インターネットゲートウェイ

ルートテーブルとインターネットゲートウェイはウィザード画面に入力として表示されていませんが、自動的に生成されます。

インターネットゲートウェイはVPCをインターネットとつなぐために作成されます。
ルートテーブルは通信を制御するために作成されます。

![/images/vpc/vpc5.jpg](/images/vpc/vpc5.jpg)

ルートテーブルにサブネットを紐付けることでインターネットに出ていけるようにしています。  
①でルートテーブルにサブネットとインターネットゲートウェイをつなげてインターネットと通信できるように設定されています。

あとで個別にサブネットを作成した場合は、インターネットに出ていくためには②からルートテーブルとサブネットを関連付ける必要があります。
